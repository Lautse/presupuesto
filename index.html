<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Presupuesto Mensual üê±</title>
    <style>
        body { 
            font-family: 'Poppins', sans-serif; 
            background: #f4f2f3; 
            color: #333; 
            margin: 0;
        }
        header { 
            background: #f7d9a6; 
            padding: 20px; 
            text-align: center; 
            border-bottom: 3px solid #eac4d5; 
        }
        h1 { margin: 0; font-size: 2rem; color: #4d3b3b; }
        h1 span { font-size: 1.4rem; }
        .container { 
            max-width: 800px; 
            margin: 30px auto; 
            padding: 30px; 
            background: white; 
            border-radius: 20px;
            box-shadow: 0 6px 15px rgba(0,0,0,0.1);
        }
        .form-group { margin: 20px 0; }
        label { font-weight: bold; }
        input, select { 
            padding: 12px; 
            font-size: 16px; 
            width: 100%; 
            border: 1px solid #ccc; 
            border-radius: 10px; 
            margin-top: 5px;
        }
        button { 
            background: #a3c9a8; 
            border: none; 
            padding: 12px 25px; 
            font-size: 16px; 
            border-radius: 12px; 
            cursor: pointer; 
            margin-top: 20px;
            transition: all 0.3s ease;
        }
        button:hover { background: #8fb893; transform: scale(1.05); }
        .result { 
            margin-top: 30px; 
            padding: 20px; 
            background: #eac4d5; 
            border-radius: 20px; 
            text-align: center;
        }
        .result img { 
            width: 120px; 
            margin-bottom: 15px; 
            border-radius: 50%;
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
        }
        canvas { margin-top: 20px; }
    </style>
</head>
<body>
    <header>
        <h1>Presupuesto Mensual <span>üê±</span></h1>
        <p>Tu asistente financiero con un toque de ternura</p>
    </header>
    <div class="container">
        <div class="form-group">
            <label for="ingreso">¬øCu√°l fue tu ingreso este mes?</label>
            <input type="number" id="ingreso" placeholder="Ejemplo: 1500000">
        </div>
        <div class="form-group">
            <label>¬øCu√°nto viajas este mes?</label>
            <select id="movilidad">
                <option value="full">Viajo todos los d√≠as</option>
                <option value="half">Viajo la mitad del mes</option>
                <option value="none">No viajo</option>
            </select>
        </div>
        <button onclick="calcular()">Calcular</button>
        <div class="result" id="resultado" style="display:none;">
            <img src="https://i.imgur.com/6X4F5pM.png" alt="Gatito motivador">
            <div id="textoResultado"></div>
        </div>
        <canvas id="graficoGastos" width="400" height="400" style="display:none;"></canvas>
    </div>

    <!-- Librer√≠a de Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script>
        let chart = null;

        function calcular() {
            let ingreso = parseFloat(document.getElementById('ingreso').value);
            if (isNaN(ingreso) || ingreso <= 0) {
                alert("Por favor ingresa un ingreso v√°lido.");
                return;
            }

            // Transporte seg√∫n movilidad
            let movilidad = document.getElementById('movilidad').value;
            let transporteComida = movilidad === "full" ? 800000 : movilidad === "half" ? 450000 : 200000;

            // Otros gastos fijos
            let belleza = 150000;
            let fitness = 150000;
            let internet = 40000;
            let entretenimiento = 140000;

            let gastosFijos = belleza + fitness + internet + entretenimiento + transporteComida;

            // Ahorro flexible
            let porcentajeAhorro = ingreso < 1300000 ? 0.08 : 0.12;
            let ahorroTotal = ingreso * porcentajeAhorro;
            let inversion = ingreso * (porcentajeAhorro >= 0.12 ? 0.07 : 0.05);
            let ahorro = ahorroTotal - inversion;

            let balance = ingreso - gastosFijos - ahorroTotal;

            // Mostrar resultados con gatito
            document.getElementById('resultado').style.display = 'block';
            document.getElementById('textoResultado').innerHTML = `
                <h2>Resultados</h2>
                <p><strong>Gastos fijos</strong>: $${gastosFijos.toLocaleString()}</p>
                <p><strong>Ahorro</strong>: $${ahorro.toLocaleString()}</p>
                <p><strong>Inversi√≥n</strong>: $${inversion.toLocaleString()}</p>
                <p><strong>Balance final</strong>: $${balance.toLocaleString()}</p>
                <p><em>Porcentaje de ahorro aplicado: ${(porcentajeAhorro*100).toFixed(0)}%</em></p>
            `;

            // Crear gr√°fico de pastel
            let ctx = document.getElementById('graficoGastos').getContext('2d');
            document.getElementById('graficoGastos').style.display = 'block';

            let data = {
                labels: ['Gastos fijos', 'Ahorro', 'Inversi√≥n', 'Balance final'],
                datasets: [{
                    data: [gastosFijos, ahorro, inversion, balance > 0 ? balance : 0],
                    backgroundColor: ['#EAC4D5', '#A3C9A8', '#F7D9A6', '#C2E7DA'],
                }]
            };

            if (chart) chart.destroy();
            chart = new Chart(ctx, {
                type: 'pie',
                data: data,
                options: {
                    responsive: true,
                    plugins: { legend: { position: 'bottom' } }
                }
            });
        }
    </script>
</body>
</html>
